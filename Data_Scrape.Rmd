---
title: "Data_Scrape"
output: pdf_document
---

```{r}
library(tidyverse)
library(rvest)
library(pdftools)
library(xml2)
library(XML)
library(RCurl)

url18<-"http://results.deltatiming.com/xc/2018-ncaa-d3-xc-championships/results/2"
url16<-"http://results.deltatiming.com/xc/2016-ncaa-d3-xc-championships/results/1"
url13<-"http://results.deltatiming.com/xc/2013-ncaa-d3-xc-championships/results/2"

times18 <- url18 %>%
  read_html() %>%
  html_nodes(xpath='//*[@id="results-data"]/div[2]/div/div/div[2]/table') %>%
  html_table()

times16<-url16 %>%
  read_html() %>%
  html_nodes(xpath='//*[@id="results-data"]/div/div/div/div[2]/table') %>%
  html_table()

###############################
###2018 Results
###############################

url18<-"https://xc.tfrrs.org/results/xc/15028.html"


#read in the data as html and select node that gives mens results, then split by "/n" character and unlist as character vector
times18<-url18 %>%
  read_html() %>%
  html_node(xpath='/html/body/div[3]/div/div/div[3]/div[6]') %>%
  html_text(trim=TRUE) %>%
  stringr::str_split("\n") %>%
  unlist()
#remove empty entries and trime whitespace
times18=times18[times18 != ""]
times18=trimws(times18)
times18=times18[times18 != ""]
#remove empty entries and interactive table header
times18=times18[-c(1:3)]
#make dataframe with results
times18<-matrix(times18, ncol=12, byrow=TRUE)
colnames(times18)<-times18[1,]
times18<-as.data.frame(times18, header=TRUE)[c(2:dim(times18)[1]),]
time18

######################
###2017 Results
######################
url17<-"https://www.tfrrs.org/results/xc/13424/NCAA_Division_III_Cross_Country_Championships"

#read in the data as html and select node that gives mens results, then split by "/n" character and unlist as character vector
times17<-url17 %>%
  read_html() %>%
  html_node(xpath='/html/body/div[3]/div/div/div[3]/div[3]') %>%
  html_text(trim=TRUE) %>%
  stringr::str_split("\n") %>%
  unlist() 
#remove empty entries and trime whitespace
times17=times17[times17 != ""]
times17=trimws(times17)
#remove empty entries and interactive table header
times17=times17[times17 != ""]
times17=times17[-c(1:3)]
#make dataframe with results
times17<-matrix(times17, ncol=7, byrow=TRUE)
colnames(times17)<-times17[1,]
times17<-as.data.frame(times17, header=TRUE)[c(2:dim(times17)[1]),]
times17$NAME<-gsub("\t", "", times17$NAME)



```


